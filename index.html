<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Entrainement au langage SQL</title>
    <style>
        body {
            font-family: monospace;
            font-size: 12pt;
            background-color: white;
        }
        #requete {
            border: 1px solid black;
            resize: none;
            width: 590px;
            margin: 0px;
            font-size: 12pt;
            padding: 4px;
        }
        #requete-container {
            text-align: center;
            width: 600px;
            margin: 2px auto;
            padding: 0px
        }
        #reponse {
            background-color: black;
            color: white;
            width: 600px;
            height: 500px;
            margin: 2px auto;
            padding: 4px;
            overflow: scroll;
        }
        .console {
            white-space: pre;
            margin: 0px;
        }
        .requete {
            white-space: normal;
            color: #00ff00;
        }
        .requete::before{
            content: "> ";
        }
        .vert {
            color: #00ff00;
        }
        .rouge {
            color: #ff8888;
        }
        .bleu {
            color: #8888ff;
        }
    </style>
</head>

<body>
    <div id="reponse"></div>
    <form id="requete-container">
        <textarea id="requete" rows=3></textarea>
        <input type="submit" value="Envoyer la requête." />
    </form>
    <script language="javascript">
        const mainKeywords = {
            "SHOW": show,
            "USE": use,
            "DESC": describe,
            "DESCRIBE": describe,
            "SELECT": select,
            "INSERT": unimplemented,
            "UPDATE": unimplemented,
            "DELETE": unimplemented,
            "MERGE": unimplemented,
            "TRUNCATE": unimplemented,
            "CREATE": unimplemented,
            "DROP": unimplemented,
            "ALTER": unimplemented,
            "RENAME": unimplemented,
        }
        const databases = []
        var currentDatabase = null
        class Database {
            constructor(nom) {
                this.nom = nom
                this.tables = {}
            }
            addTable(nom, base) {
                if (this.tables[nom]) {
                    console.log(`La base "${this.nom}" comporte déjà une table nomée "${nom}"`)
                } else {
                    this.tables[nom] = new Table(nom, this)
                }
            }
        }
        class Table {
            constructor(nom, base) {
                this.nom = nom
                this.columns = {}
                this.data = []
                this.base = base
            }
            addColumn(nom, type) {
                if (this.columns[nom]) {
                    console.log(`La table "${this.nom}" comporte déjà une colonne nomée "${nom}".`)
                } else {
                    this.columns[nom] = new Column(nom, type, this)
                }
            }
            addData(element) {
                const colonneInconnue = Object.keys(element).filter(key => !this.columns[key])
                if (colonneInconnue.length == 1) {
                    console.log(`La table "${this.nom}" ne comporte pas de colonne "${colonneInconnue[0]}".`)
                } else if (colonneInconnue.length > 1) {
                    console.log(`La table "${this.nom}" ne comporte pas de colonnes "${colonneInconnue.join(', ')}".`)
                } else {
                    this.data.push(element)
                    for (const key in element) {
                        const newLength = element[key].toString().length
                        const column = this.columns[key]
                        if (column.maxLength < newLength) {
                            column.maxLength = newLength
                        }
                    }
                }
            }
        }
        class Column {
            constructor(nom, type, table) {
                this.type = type
                this.nom = nom
                this.table = table
                this.maxLength = nom.length
            }
        }
        class SearchColumn {
            constructor(nom) {
                const liste = nom.split(".")
                this.raw = nom
                this.nom = nom
                this.alias = nom
                this.dbColumn = null
                this.table = null
                if (liste.length == 2) {
                    this.nom = liste[1]
                    this.table = liste[0]
                }
            }
        }
        class SearchTable {
            constructor(nom) {
                this.raw = nom
                this.nom = nom
                this.alias = nom
                this.dbTable = null
            }
        }
        /*
         * produit cartésien d'une liste de n tables
         */
        function produitCartesien(L) {
            return L.reduce((acc, cur) => {
                const newAcc = []
                const data = cur.dbTable.data
                if (acc.length) {
                    acc.forEach(elemAcc => {
                        data.forEach( elem => {
                            const obj = {...elemAcc}
                            obj[cur.nom] = elem
                            newAcc.push(obj)
                        })
                    })
                } else {
                    data.forEach( elem => {
                        const obj = {}
                        obj[cur.nom] = elem
                        newAcc.push(obj)
                    })
                }
                return newAcc
            }, [])
        }
        /*
         * vérifie que le nom ne comporte que des lettres, des chiffres et/ou le caractère _
         */
        function checkName(nom) {
            const regex = /^\w+$/g
            if (regex.test(nom)) {
                return true
            } else {
                print(`Le nom "${nom}" contient des caractères interdits`, "rouge")
                return false
            }
        }
        /*
         * ajoute autant d'espace que necessaire pour obtenir une chaine de bonne longueur.
         * si le texte est trop long, retourne le texte tel quel.
         */
        function expandText(texte, longueur) {
            if (longueur>=texte.length) {
                return texte + " ".repeat(longueur-texte.length)
            } else {
                return texte
            }
        }
        /*
         * affiche une ligne dans le cadre 'réponse'
         */
        function print(texte, classe) {
            const div = document.getElementById("reponse")
            const p = document.createElement("p")
            p.textContent = texte
            if (classe) {
                p.className = "console " + classe
            } else {
                p.className = "console "
            }
            div.appendChild(p)
            div.scrollTop = div.scrollHeight;
        }
        /*
         * retourne un callback permettant de trier selon les paramètres à utiliser par la fonction sort
         */
        function tri(cols) {
            const callback = (obj1, obj2) => {
                for (i=0; i<cols.length; i++) {
                    const col = cols[i]
                    const preelem1 = obj1[col.table.nom][col.nom]
                    const elem1 = typeof preelem1 == "string" ? preelem1.toUpperCase() : preelem1
                    const preelem2 = obj2[col.table.nom][col.nom]
                    const elem2 = typeof preelem2 == "string" ? preelem2.toUpperCase() : preelem2
                    if (elem1 < elem2) {
                        return col.desc ? false : true
                    } else if (elem1 > elem2) {
                        return col.desc ? true : false
                    }
                }
                return true
            }
            return callback
        }
        /*
         * affiche des données sous la forme d'un tableau dans le cadre 'réponse'
         */
        function printTable(entete, data, largeurs, distinct) {
            for (i=0; i<entete.length; i++) {
                largeurs[i] = Math.max(largeurs[i], entete[i].toString().length)
            }
            const ligne = "+" + largeurs.map(l => '-'.repeat(l+2)).join("+") + "+"
            print(ligne)
            print("| " + entete.map((col, i) => expandText(col.toString(), largeurs[i])).join(" | ") + " |")
            print(ligne)
            var listeTextes = data.map(row => "| " + row.map((col, i) => expandText(col.toString(), largeurs[i])).join(" | ") + " |")
            if (distinct) {
                listeTextes = Array.from(new Set(listeTextes))
            }
            const nb = listeTextes.length
            listeTextes.forEach(row => {
                print(row)
                print(ligne)
            })
            print(`${nb} ${nb>1?"lignes":"ligne"}`, "bleu")
        }
        /*
         * vérifie que le mot clé de 'requete' à la position 'index' est dans 'dictionnaire'
         */
        function checkKeyword(requete, index, dictionnaire) {
            if (requete.length > index) {
                const keyword = requete[index].toUpperCase()
                if (dictionnaire[keyword]) {
                    dictionnaire[keyword](requete, index)
                } else {
                    print(`Mot clé "${keyword}" inattendu`, "rouge")
                }
            } else {
                print("Requete incomplète", "rouge")
            }
        }
        /*
         * traite le mot-clé mysql 'SHOW'
         */
        function show(requete, index) {
            const nextKeywords = {
                "DATABASES": showDatabases,
                "TABLES": showTables
            }
            checkKeyword(requete, index+1, nextKeywords)
        }
        /*
         * traite la commande mysql 'SHOW DATABASES'
         */
        function showDatabases(requete, index) {
            const dblist = databases.map(db => [db.nom])
            const largeur = Math.max(...dblist.map(nom => nom.toString().length))
            printTable(["DATABASES"], dblist, [largeur])
        }
        /*
         * traite la commande mysql 'SHOW TABLES'
         */
        function showTables(requete, index) {
            if (currentDatabase) {
                const tablesList = Object.keys(currentDatabase.tables).map(nom => [nom])
                const largeur = Math.max(...tablesList.map(L => L[0].length))
                printTable([`TABLES in ${currentDatabase.nom}`], tablesList, [largeur])
            } else {
                print("Aucune base de données sélectionnée", "rouge")
            }
        }
        /*
         * traite la commande mysql 'USE'
         */
        function use(requete, index) {
            if (requete.length > index + 1) {
                const nom = requete[index+1]
                if (checkName(nom)) {
                    dbList = databases.filter(db => db.nom.toUpperCase() == nom.toUpperCase())
                    if (dbList.length) {
                        currentDatabase = dbList[0]
                        print(`La base de données "${nom}" a bien été selectionnée.`)
                    } else {
                        print(`Erreur, il n'y a aucune base de données nomée "${nom}".`, "rouge")
                    }
                }
            } else {
                print("Requete incomplète", "rouge")
            }
        }
        /*
         * traite la commande mysql 'DESCRIBE'
         */
        function describe(requete, index) {
            if (currentDatabase) {
                const db = currentDatabase
                if (requete.length > index + 1) {
                    const nom = requete[index+1]
                    if (db.tables[nom]) {
                        const infos = Object.values(db.tables[nom].columns).map(lbl => [lbl.nom, lbl.type])
                        const largeurs = [Math.max(...infos.map(L => L[0].length)),
                                          Math.max(...infos.map(L => L[1].length))]
                        printTable(["COLUMN'S NAME", "TYPE"], infos, largeurs)
                    } else {
                        print(`Il n'y a aucune table nomée "${nom}" dans la base de données ${db.nom}.`, "rouge")
                    }
                } else {
                    print("Requete incomplète", "rouge")
                }
            } else {
                print("Aucune base de données sélectionnée", "rouge")
            }
        }
        /*
         * traite le mot-clé mysql 'SELECT'
         */
        function select(requete, index) {
            if (requete.length > index + 1) {
                if (requete[index+1].toUpperCase() == "DATABASE") {
                    selectDatabase(requete, index + 1)
                } else if (currentDatabase) {
                    selectFrom(requete, index)
                } else {
                    print("Aucune base de données sélectionnée", "rouge")
                }
            } else {
                print("Requete incomplète", "rouge")
            }    
        }
        /*
         * traite la commande mysql 'SELECT database()'
         */
        function selectDatabase(requete, index) {
            if (requete.length > index+2) {
                if (requete[index+1] == "(" && requete[index+2] == ")") {
                    if (currentDatabase) {
                        print(`La base de données "${currentDatabase.nom}" est actuellement selectionnée.`)
                    } else {
                        print("Aucune base de données n'est sélectionnée", "rouge")
                    }
                } else {
                    print("Erreur de syntaxe", "rouge")
                }
            } else {
                print("Requete incomplète", "rouge")
            }
        }
        /*
         * traite la commande mysql 'SELECT FROM'
         */
        function selectFrom(requete, index) {
            const selectFromInfos = {
                distinct: false,
                columnsList: [],
                tablesList: [],
                orderByList: [],
                combinaisons: [],
                requete: requete,
                index: index
            }
            if (requete.length > index + 1 && requete[index + 1].toUpperCase() == "DISTINCT") {
                selectFromInfos.index += 1
                selectFromInfos.distinct = true
            }
            exploreColumns(selectFromInfos)
        }
        /*
         * recherche (récursivement) le nom des colonnes à afficher pour un SELECT FROM
         */
        function exploreColumns(I) {
            if (I.requete.length > I.index+2 && I.requete[I.index+2] == ',') {
                I.columnsList.push(new SearchColumn(I.requete[I.index+1]))
                I.index += 2
                exploreColumns(I)
            } else if (I.requete.length > I.index+2 && I.requete[I.index+2].toUpperCase() == 'FROM') {
                I.columnsList.push(new SearchColumn(I.requete[I.index+1]))
                I.index += 2
                exploreTables(I)
            } else {
                print("erreur lors de la lecture du nom des colonnes", "rouge")
            }
        }
        /*
         * recherche (récursivement) le nom des sources de données et eventuellement les alias avant de faire un SELECT FROM
         */
        function exploreTables(I) {
            if (I.requete.length > I.index+2 && I.requete[I.index+2] == ',') {
                I.tablesList.push(new SearchTable(I.requete[I.index+1]))
                I.index += 2
                exploreTables(I)
            } else if (I.requete.length > I.index+1) {
                I.tablesList.push(new SearchTable(I.requete[I.index+1]))
                I.index += 1
                checkTables(I)
            } else {
                print("erreur lors de la lecture du nom des tables", "rouge")
            }
        }
        /*
         * controle et associe les tables utilisées pour un SELECT FROM
         */
        function checkTables(I) {
            const db = currentDatabase
            var valide = true
            I.tablesList.forEach(table => {
                if (db.tables[table.nom]) {
                    table.dbTable = db.tables[table.nom]
                } else {
                    print(`La table "${table.nom}" n'existe pas dans la base de données "${db.nom}"`, "rouge")
                    valide = false
                }
            })
            if (valide) {
                checkColumns(I)
            }
        }
        /*
         * controle et associe les colonnes afin de faire un SELECT FROM
         */
        function checkColumns(I) {
            var valide = true
            const db = currentDatabase
            const searchTablesName = I.tablesList.map(table => table.nom)
            const searchTablesAlias = I.tablesList.map(table => table.alias)
            const searchTablesAll = searchTablesName.concat(searchTablesAlias);
            const allColumns = I.tablesList.reduce((acc, cur) => {
                Object.values(cur.dbTable.columns).forEach(col => acc.push(col))
                return acc
            }, [])
            I.columnsList.forEach(col => {
                if (col.table) {
                    const tableIndex = searchTablesAll.indexOf(col.table)
                    if (tableIndex > -1) {
                        const table = I.tablesList[tableIndex % I.tablesList.length].dbTable
                        if (table[col.nom]) {
                            col.table = table
                            col.dbColumn = table.columns[col.nom]
                        } else {
                            print(`La colonne "${col.nom}" n'existe pas dans la table "${table.nom}"`, "rouge")
                            valide = false
                        }
                    } else {
                        print(`La table "${col.table}" n'existe pas dans la base de données "${db.nom}"`, "rouge")
                            valide = false
                    }
                } else {
                    const columns = allColumns.filter(c => c.nom == col.nom)
                    if (columns.length == 1) {
                        col.dbColumn = columns[0]
                        col.table = columns[0].table
                    } else if (columns.length > 1) {
                        print(`Le nom de colonne "${col.nom}" est présent dans plusieurs tables proposées`, "rouge")
                        valide = false
                    } else {
                        print(`Le nom de colonne "${col.nom}" n'est présent dans aucune table proposée`, "rouge")
                        valide = false
                    }
                }
            })
            if (valide) {
                I.combinaisons = produitCartesien(I.tablesList)
                if (I.requete.length > I.index+1 && I.requete[I.index+1].toUpperCase() == 'ORDER') {
                    I.index += 1
                    if (I.requete.length > I.index+1 && I.requete[I.index+1].toUpperCase() == 'BY') {
                        I.index += 1
                        exploreOrderBy(I)
                    } else {
                        print("Erreur de syntaxe")
                    }
                } else {
                    showSelectResults(I)
                }
            }
        }
        /*
         * recherche (récursivement) les tables pour un ORDER BY
         */
        function exploreOrderBy(I) {
            if (I.requete.length > I.index+2 && I.requete[I.index+2] == ',') {
                const col = new SearchColumn(I.requete[I.index+1])
                col.desc = true
                I.orderByList.push(col)
                I.index += 2
                exploreOrderBy(I)
            } else if (I.requete.length > I.index+3 && I.requete[I.index+3] == ',') {
                if (I.requete[I.index+2].toUpperCase() == "DESC") {
                    const col = new SearchColumn(requete[index+1])
                    col.desc = false
                    I.orderByList.push(col)
                    I.index += 3
                    exploreOrderBy(I)
                } else {
                    print("Erreur de syntaxe")
                }
            } else if (I.requete.length > I.index+2 && I.requete[I.index+2].toUpperCase() == "DESC") {
                const col = new SearchColumn(I.requete[I.index+1])
                col.desc = false
                I.orderByList.push(col)
                I.index += 2
                checkOrderBy(I)
            } else if (I.requete.length > I.index+1) {
                const col = new SearchColumn(I.requete[I.index+1])
                col.desc = true
                I.orderByList.push(col)
                I.index += 1
                checkOrderBy(I)
            } else {
                print("Requete incomplète")
            }
        }
        /*
         * vérifie les colonnes afin de faire un tri grâce à ORDER BY
         */
        function checkOrderBy(I) {
            var valide = true
            const db = currentDatabase
            I.orderByList.forEach(col => {
                const cols = I.columnsList.filter(c => c.nom == col.nom)
                if (cols.length == 1) {
                    col.dbColumn = cols[0].dbColumn
                    col.table = cols[0].table
                } else if (cols.length > 1) {
                    const tabs = I.columnsList.filter(c => c.table == col.table)
                    if (cols.length == 1) {
                        col.dbColumn = tabs[0].dbColumn
                        col.table = tabs[0].table
                    } else {
                        print(`Impossible d'ordonner les résultats selon "${col.raw}"`)
                        valide = false
                    }
                } else {
                    print(`Impossible d'ordonner les résultats selon "${col.raw}"`)
                    valide = false
                }
            })
            if (valide) {
                applyOrderBy(I)
            }
        }
        /*
         * traite la commande ORDER BY suite à un 'SELECT FROM'
         */
        function applyOrderBy(I) {
            I.combinaisons.sort(tri(I.orderByList))
            showSelectResults(I)
        }
        /*
         * affiche uniquement les colonnes désirées
         */
        function showSelectResults(I) {
            if (I.requete.length > I.index + 1) {
                print(`Mot clé "${I.requete[I.index + 1]}" inattendu`, "rouge")
            } else {
                const entete = I.columnsList.map(col => col.alias)
                const largeurs = I.columnsList.map(col => col.dbColumn.maxLength)
                data = I.combinaisons.map(elem => I.columnsList.map(col => elem[col.table.nom][col.nom]))
                printTable(entete, data, largeurs, I.distinct)
            }
        }
        /*
         * retourne un message indiquant que la commande mysql est non implémentée
         */
        function unimplemented(requete, index) {
            print(`La commande "${requete[index]}" n'est pas implémentée pour le moment.`, "rouge")
        }
        /*
         * interprete la commande mysql saisie dans le champ de texte requete
         */
        function interpreter(event) {
            event.preventDefault()
            const originalReq = document.getElementById("requete").value.replace(/^\s+|\s+$/g, '')
            if (originalReq[originalReq.length - 1] == ";") {
                const listeReq = originalReq.replace("\n", " ").split(';').filter(term => term != "")
                listeReq.forEach( elem => {
                    print(elem.replace('\n', ' ')+";", "requete")
                    var req = elem.replace(/(\r\n|\n\r|\r|\n)/g, " ")
                    const listChar = ["(", ")", ","]
                    listChar.forEach(char => req = req.split(char).join(" "+char+" "))
                    const requete = req.split(" ").filter(term => term != "")
                    checkKeyword(requete, 0, mainKeywords)
                })
            } else {
                print(originalReq, "requete")
                print('La requete doit finir par ";"', "rouge")
            }
        }
        
        document.getElementById("requete-container").addEventListener("submit", interpreter)
        print('Base de données en mode "Bac à sable" prête !', "bleu")
        print('dernière nouveauté : prise en charge de "ORDER BY"', "bleu")
        
        /*
         * un exemple de database sur les sériers et acteurs des Emmy Awards 2018
         */
        const db_emmy = new Database("emmy18")
        db_emmy.addTable("series")
        db_emmy.tables["series"].addColumn("id", "SMALLINT")
        db_emmy.tables["series"].addColumn("nom", "VARCHAR")
        db_emmy.tables["series"].addColumn("diffuseur", "VARCHAR")
        db_emmy.tables["series"].addData({id: 1, nom: "Game of Thrones", diffuseur: "HBO"})
        db_emmy.tables["series"].addData({id: 2, nom: "The Americans", diffuseur: "FX"})
        db_emmy.tables["series"].addData({id: 3, nom: "The Crown", diffuseur: "Netflix"})
        db_emmy.tables["series"].addData({id: 4, nom: "The Handmaid's Tale : La Servante écarlate", diffuseur: "Hulu"})
        db_emmy.tables["series"].addData({id: 5, nom: "Stranger Things", diffuseur: "Netflix"})
        db_emmy.tables["series"].addData({id: 6, nom: "This Is Us", diffuseur: "NBC"})
        db_emmy.tables["series"].addData({id: 7, nom: "Westworld", diffuseur: "HBO"})
        db_emmy.tables["series"].addData({id: 8, nom: "Ozark", diffuseur: "Netflix"})
        db_emmy.tables["series"].addData({id: 9, nom: "Orphan Black", diffuseur: "BBC America"})
        db_emmy.tables["series"].addData({id: 10, nom: "Killing Eve", diffuseur: "BBC America"})
        db_emmy.tables["series"].addData({id: 11, nom: "Homeland", diffuseur: "Showtime"})
        db_emmy.tables["series"].addData({id: 12, nom: "Mme Maisel, femme fabuleuse", diffuseur: "Amazon"})
        db_emmy.tables["series"].addData({id: 13, nom: "Atlanta", diffuseur: "FX"})
        db_emmy.tables["series"].addData({id: 14, nom: "Barry", diffuseur: "HBO"})
        db_emmy.tables["series"].addData({id: 15, nom: "Black-ish", diffuseur: "ABC"})
        db_emmy.tables["series"].addData({id: 16, nom: "Larry et son nombril", diffuseur: "HBO"})
        db_emmy.tables["series"].addData({id: 17, nom: "GLOW", diffuseur: "Netflix"})
        db_emmy.tables["series"].addData({id: 18, nom: "Silicon Valley", diffuseur: "HBO"})
        db_emmy.tables["series"].addData({id: 19, nom: "Unbreakable Kimmy Schmidt", diffuseur: "Netflix"})
        db_emmy.tables["series"].addData({id: 20, nom: "The Good Place", diffuseur: "NBC"})
        db_emmy.tables["series"].addData({id: 21, nom: "Shameless", diffuseur: "Showtime"})
        db_emmy.tables["series"].addData({id: 22, nom: "Better Things", diffuseur: "FX"})
        db_emmy.tables["series"].addData({id: 23, nom: "Mom", diffuseur: "CBS"})
        db_emmy.tables["series"].addData({id: 24, nom: "Insecure", diffuseur: "HBO"})
        db_emmy.tables["series"].addData({id: 25, nom: "Grace et Frankie", diffuseur: "Netflix"})
        db_emmy.tables["series"].addData({id: 26, nom: "Baskets", diffuseur: "FX"})
        db_emmy.tables["series"].addData({id: 27, nom: "Roseanne", diffuseur: "ABC"})
        db_emmy.tables["series"].addData({id: 28, nom: "Will et Grace", diffuseur: "NBC"})

        db_emmy.addTable("acteurs")
        db_emmy.tables["acteurs"].addColumn("id", "SMALLINT")
        db_emmy.tables["acteurs"].addColumn("nom", "VARCHAR")
        db_emmy.tables["acteurs"].addColumn("prenom", "VARCHAR")
        db_emmy.tables["acteurs"].addColumn("sexe", "CHAR(1)")
        db_emmy.tables["acteurs"].addColumn("pays", "VARCHAR")
        db_emmy.tables["acteurs"].addColumn("date_de_naissance", "DATE")
        db_emmy.tables["acteurs"].addData({id: 1, nom: "Rhys", prenom: "Matthew", sexe: "M", pays: "Pays de Galles", date_de_naissance: "1974-11-08"})
        db_emmy.tables["acteurs"].addData({id: 2, nom: "Bateman", prenom: "Jason", sexe: "M", pays: "États-Unis", date_de_naissance: "1969-01-14"})
        db_emmy.tables["acteurs"].addData({id: 3, nom: "Brown", prenom: "Sterling K.", sexe: "M", pays: "États-Unis", date_de_naissance: "1976-04-05"})
        db_emmy.tables["acteurs"].addData({id: 4, nom: "Harris", prenom: "Ed", sexe: "M", pays: "États-Unis", date_de_naissance: "1950-11-28"})
        db_emmy.tables["acteurs"].addData({id: 5, nom: "Ventimiglia", prenom: "Milo", sexe: "M", pays: "États-Unis", date_de_naissance: "1977-07-08"})
        db_emmy.tables["acteurs"].addData({id: 6, nom: "Wright", prenom: "Jeffrey", sexe: "M", pays: "États-Unis", date_de_naissance: "1965-12-07"})
        db_emmy.tables["acteurs"].addData({id: 7, nom: "Foy", prenom: "Claire", sexe: "F", pays: "Angleterre", date_de_naissance: "1984-04-16"})
        db_emmy.tables["acteurs"].addData({id: 8, nom: "Maslany", prenom: "Tatiana", sexe: "F", pays: "Canada", date_de_naissance: "1985-09-22"})
        db_emmy.tables["acteurs"].addData({id: 9, nom: "Moss", prenom: "Elisabeth", sexe: "F", pays: "États-Unis", date_de_naissance: "1982-07-24"})
        db_emmy.tables["acteurs"].addData({id: 10, nom: "Oh", prenom: "Sandra", sexe: "F", pays: "Canada", date_de_naissance: "1970-11-30"})
        db_emmy.tables["acteurs"].addData({id: 11, nom: "Russell", prenom: "Keri", sexe: "F", pays: "États-Unis", date_de_naissance: "1976-03-23"})
        db_emmy.tables["acteurs"].addData({id: 12, nom: "Wood", prenom: "Evan Rachel", sexe: "F", pays: "États-Unis", date_de_naissance: "1987-09-07"})
        db_emmy.tables["acteurs"].addData({id: 13, nom: "Dinklage", prenom: "Peter", sexe: "M", pays: "États-Unis", date_de_naissance: "1969-06-11"})
        db_emmy.tables["acteurs"].addData({id: 14, nom: "Coster-Waldau", prenom: "Nikolaj", sexe: "M", pays: "Danemark", date_de_naissance: "1970-07-27"})
        db_emmy.tables["acteurs"].addData({id: 15, nom: "Fiennes", prenom: "Joseph", sexe: "M", pays: "Angleterre", date_de_naissance: "1970-05-27"})
        db_emmy.tables["acteurs"].addData({id: 16, nom: "Harbour", prenom: "David", sexe: "M", pays: "États-Unis", date_de_naissance: "1975-04-10"})
        db_emmy.tables["acteurs"].addData({id: 17, nom: "Patinkin", prenom: "Mandy", sexe: "M", pays: "États-Unis", date_de_naissance: "1952-11-30"})
        db_emmy.tables["acteurs"].addData({id: 18, nom: "Smith", prenom: "Matthew", sexe: "M", pays: "Angleterre", date_de_naissance: "1982-10-28"})
        db_emmy.tables["acteurs"].addData({id: 19, nom: "Newton", prenom: "Thandie", sexe: "F", pays: "Angleterre", date_de_naissance: "1972-11-06"})
        db_emmy.tables["acteurs"].addData({id: 20, nom: "Bledel", prenom: "Alexis", sexe: "F", pays: "États-Unis", date_de_naissance: "1981-09-16"})
        db_emmy.tables["acteurs"].addData({id: 21, nom: "Brown", prenom: "Millie Bobby", sexe: "F", pays: "Espagne", date_de_naissance: "2004-02-19"})
        db_emmy.tables["acteurs"].addData({id: 22, nom: "Dowd", prenom: "Ann", sexe: "F", pays: "États-Unis", date_de_naissance: "1956-01-30"})
        db_emmy.tables["acteurs"].addData({id: 23, nom: "Heady", prenom: "Lena", sexe: "F", pays: "Royaume-Uni", date_de_naissance: "1973-10-03"})
        db_emmy.tables["acteurs"].addData({id: 24, nom: "Kirby", prenom: "Vanessa", sexe: "F", pays: "Angleterre", date_de_naissance: "1988-04-18"})
        db_emmy.tables["acteurs"].addData({id: 25, nom: "Strahovski", prenom: "Yvonne", sexe: "F", pays: "Australie", date_de_naissance: "1982-07-30"})

        db_emmy.addTable("tourne")
        db_emmy.tables["tourne"].addColumn("id_acteur", "SMALLINT")
        db_emmy.tables["tourne"].addColumn("id_serie", "SMALLINT")
        db_emmy.tables["tourne"].addColumn("role", "VARCHAR")
        db_emmy.tables["tourne"].addData({id_acteur: 1, id_serie: 2, role: "Philip Jennings"})
        db_emmy.tables["tourne"].addData({id_acteur: 2, id_serie: 8, role: 'Martin "Marty" Byrde'})
        db_emmy.tables["tourne"].addData({id_acteur: 3, id_serie: 6, role: "Randall Pearson"})
        db_emmy.tables["tourne"].addData({id_acteur: 4, id_serie: 7, role: "l'homme en noir"})
        db_emmy.tables["tourne"].addData({id_acteur: 5, id_serie: 6, role: "Jack Pearson"})
        db_emmy.tables["tourne"].addData({id_acteur: 6, id_serie: 7, role: "Bernard Lowe"})
        db_emmy.tables["tourne"].addData({id_acteur: 7, id_serie: 3, role: "Élisabeth II"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Sarah Manning"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Elizabeth « Beth » Childs"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Cosima Niehaus"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Alison Hendrix"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Helena"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Rachel Duncan"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Katja Obinger"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Danielle Fournier"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Aryanna Giordano"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Janika Zingler"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Jennifer Fitzsimmons"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Tony Sawicki"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Krystal Goderitch"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "MK (Veera Suominen)"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Niki"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Miriam Johnson"})
        db_emmy.tables["tourne"].addData({id_acteur: 8, id_serie: 9, role: "Camilla Torres"})
        db_emmy.tables["tourne"].addData({id_acteur: 9, id_serie: 4, role: "June Osborne-Offred"})
        db_emmy.tables["tourne"].addData({id_acteur: 10, id_serie: 10, role: "Eve Polastri"})
        db_emmy.tables["tourne"].addData({id_acteur: 11, id_serie: 2, role: "Elizabeth Jennings"})
        db_emmy.tables["tourne"].addData({id_acteur: 12, id_serie: 7, role: "Dolores Abernathy"})
        db_emmy.tables["tourne"].addData({id_acteur: 13, id_serie: 1, role: "Tyrion Lannister"})
        db_emmy.tables["tourne"].addData({id_acteur: 14, id_serie: 1, role: "Jaime Lannister"})
        db_emmy.tables["tourne"].addData({id_acteur: 15, id_serie: 4, role: "Fred Waterford"})
        db_emmy.tables["tourne"].addData({id_acteur: 16, id_serie: 5, role: "Jim Hopper"})
        db_emmy.tables["tourne"].addData({id_acteur: 17, id_serie: 11, role: "Saul Berenson"})
        db_emmy.tables["tourne"].addData({id_acteur: 18, id_serie: 3, role: "Prince Philip"})
        db_emmy.tables["tourne"].addData({id_acteur: 19, id_serie: 7, role: "Maeve Millay"})
        db_emmy.tables["tourne"].addData({id_acteur: 20, id_serie: 4, role: "Emily"})
        db_emmy.tables["tourne"].addData({id_acteur: 21, id_serie: 5, role: "Jane Ives / Onze"})
        db_emmy.tables["tourne"].addData({id_acteur: 22, id_serie: 4, role: "Tante Lydia"})
        db_emmy.tables["tourne"].addData({id_acteur: 23, id_serie: 1, role: "Cersei Lannister"})
        db_emmy.tables["tourne"].addData({id_acteur: 24, id_serie: 3, role: "Princesse Margaret"})
        db_emmy.tables["tourne"].addData({id_acteur: 25, id_serie: 4, role: "Serena Joy Waterford"})
        databases.push(db_emmy)
    </script>
</body>
</html>
